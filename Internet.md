![alt text](image.png)

光猫是一种调制解调器，是光调制解调器，主要作用是将光信号转化为电信号，如果入户线是光纤的，那么需要光猫来将光信号转换为电信号，然后连接路由器，其他终端设备连接路由器来上网，很多光猫也带有路由器的功能，但是一般不太好用，所以一般都是建议光猫和路由器一起来使用，各司其职。 如果入户线不是光纤，那么只要有个路由器就可以直接上网了


### 集线器大致原理
![alt text](image-5.png)
![alt text](image-4.png)


    为每台电脑进行了标记（mac地址，全球唯一）6位16进制代码。
    集线器的工作方式为广播，将接收到的信息进行群发。
    MAC地址可查：（也可以从ipconfig /all中查看）
    IP地址划分区域（0.0.0.0---255.255.255.255，二进制，2的八次方，总共有2的三十二次方）
    交换机的DHCP-自动给连接到其的计算机分发IP地址，划分广播域（类似subnet）
    路由器去管理交换机，实现不同广播域的交互（使用IP地址查询）。
    发送请求时，其中包含目标/自己的IP，以及mac地址。有了IP地址，就不走广播，交换机上的arp协议（协议：数据格式）会发送arp广播包，收到此广播包的计算机将会把mac，IP地址返回交换机，以此避免广播风暴
    IPV6的网络地址为8位十六进制数
    IANA机构，负责分发IP地址。

### 通信流程
![alt text](image-6.png)

    IP地址：0.0.0.0 -- 255.255.255.255 中分配了 192.168.x.x
    公网IP
    私网IP 198.168.x.x
    NAT网络地址转换：将内网的私网IP转为公网IP
    当私网的一台设备发送到www.baidu.com的请求，首先要经过DNS解析，将域名（好记）解析为百度服务器的IP地址（公网IP）
    NAT网络地址转换：
        数据包：
            - 目标IP：百度地址
            源IP：无法使用内网IP，只能找路由器的公网IP，但是会记录下私网IP。
            - Target port
    该请求会经过多过路由跳转，直到找到对应的百度的路由器，路由往路由通信，使用了路由协议，路由计算会计算最佳跳转路径。

    举例：从A计算机给B计算机在京东APP上发送消息，B计算机如何正确的在京东APP中受到信息？
    计算机会给每个需要网络的程序程序配置端口号（0-65535）
    根据收到的数据包，路由器进行端口映射
    80：198.168.12.11，映射到路由器下的一个主机上。
    根据数据包中源主机的信息，精准返回信息。并列路由器上会记录下京东的IP地址，方便未来使用。



    




## OSI 7层模型
互联网协议按照功能不同分为osi七层或tcp/ip五层或tcp/ip四层：
![alt text](image-1.png)

![alt text](image-10.png)

### 物理层
物理层 ：解决信号转换的问题，基本都是数字信号，二进制数据控制的电路信号、电磁信号：电信号、光纤(光信号：光纤网卡可以将电信号转换为光信号)、电磁波。这个基本不需要我们关注，设备厂商就帮我们解决了。

### 数据链接层

    mac地址主要是用来解决网络通信的目标问题的，可以让信号传输的时候找到正确的网卡，不会把数据发乱目标。

    数据链路层由来：单纯的电信号0和1没有任何意义，必须规定电信号多少位一组，每组什么意思
    数据链路层的功能：定义了电信号的分组方式
    以太网协议（早期）：早期的时候各个公司都有自己的分组方式，后来形成了统一的标准，即以太网协议ethernet
    · 一组电信号构成一个数据包，叫做‘帧’
    · 每一数据帧分成：报头head和data两部分
    head包含：(固定18个字节)
        发送者／源地址，6个字节
        接收者／目标地址，6个字节
        数据类型，6个字节
    data包含：(最短46字节，最长1500字节)

    数据包的具体内容
    　　　　head长度＋data长度＝最短64字节，最长1518字节，超过最限制就分片发送。

    MAC地址：
        head中包含的源和目标地址由来：ethernet规定接入internet的设备都必须具备网卡，发送端和接收端的地址便是指网卡的地址，即mac地址

        mac地址：每块网卡出厂时都被烧制上一个世界唯一的mac地址，长度为48位2进制，通常由12位16进制数表示（前六位是厂商编号，后六位是流水线号）

    广播：
        有了mac地址，同一网络内的两台主机就可以通信了（一台主机通过arp协议获取另外一台主机的mac地址）

        ethernet（以太网）采用最原始的方式，广播的方式进行通信，即计算机通信基本靠吼

![alt text](image-9.png)


### 网络层
    网络层由来：有了ethernet、mac地址、广播的发送方式，世界上的计算机就可以彼此通信了，问题是世界范围的互联网是由

    一个个彼此隔离的小的局域网组成的，那么如果所有的通信都采用以太网的广播方式，那么一台机器发送的包全世界都会收到，

    这就不仅仅是效率低的问题了，这会是一种灾难

![alt text](image-11.png)

    上图结论：必须找出一种方法来区分哪些计算机属于同一广播域，哪些不是。如果是就采用广播的方式发送，如果不是，就采用路由的方式（向不同广播域／子网分发数据包），mac地址是无法区分的，它只跟厂商有关。
    网络层功能：引入一套新的地址用来区分不同的广播域／子网，这套地址即网络地址

    IP协议：
    · 规定网络地址的协议叫ip协议，它定义的地址称之为ip地址，广泛采用的v4版本即ipv4，它规定网络地址由32位2进制表示
    · 范围0.0.0.0-255.255.255.255 (4个点分十进制，也就是4个8位二进制数)
    · 一个ip地址通常写成四段十进制数，例：172.16.10.1

    ipv6，通过上面可以看出，ip紧缺，所以为了满足更多ip需要，出现了ipv6协议：6个冒号分割的16进制数表示，这个应该是将来的趋势，但是ipv4还是用的最多的，因为我们一般一个公司就一个对外的IP地址，我们所有的机器上网都走这一个IP出口。

    ip地址分成两部分

    网络部分：标识子网
    主机部分：标识主机
    　注意：单纯的ip地址段只是标识了ip地址的种类，从网络部分或主机部分都无法辨识一个ip所处的子网

　　例：172.16.10.1与172.16.10.2并不能确定二者处于同一子网

    子网掩码：
    所谓”子网掩码”，就是表示子网络特征的一个参数。它在形式上等同于IP地址，也是一个32位二进制数字，它的网络部分全部为1，主机部分全部为0。比如，IP地址172.16.10.1，如果已知网络部分是前24位，主机部分是后8位，那么子网络掩码就是11111111.11111111.11111111.00000000，写成十进制就是255.255.255.0。
    知道”子网掩码”，我们就能判断，任意两个IP地址是否处在同一个子网络。方法是将两个IP地址与子网掩码分别进行AND运算（两个数位都为1，运算结果为1，否则为0），然后比较结果是否相同，如果是的话，就表明它们在同一个子网络中，否则就不是。

    比如，已知IP地址172.16.10.1和172.16.10.2的子网掩码都是255.255.255.0，请问它们是否在同一个子网络？两者与子网掩码分别进行AND运算，

    　　172.16.10.1：10101100.00010000.00001010.000000001

    　　255255.255.255.0:11111111.11111111.11111111.00000000

    　　AND运算得网络地址结果：10101100.00010000.00001010.000000001->172.16.10.0

    

    　　172.16.10.2：10101100.00010000.00001010.000000010

    　　255.255.255.0:11111111.11111111.11111111.00000000

    　　AND运算得网络地址结果：10101100.00010000.00001010.000000001->172.16.10.0

    　　结果都是172.16.10.0，因此它们在同一个子网络。

    　　ip地址与子网掩码 按位与 得到网段地址

